# msa-capstone-project
<img src= "https://t1.daumcdn.net/cfile/tistory/997A00365C79475E04?download">


  
## ğŸ‘« Team

   |íŒ€|ì„±ëª…|ì§ê¸‰|ì‚¬ë²ˆ|ì†Œì†||
   |:----:|:------:|:------:|:------|:------|------|
   |2|ğŸ–ì„œì •í›ˆ|ê³¼ì¥|201600017|ì„œë¹„ìŠ¤í˜ì‹ ì„¼í„°|ì œì¡°ë°©ì‚°ë‹´ë‹¹/ë°©ì‚°ìš´ì˜2íŒ€|
   ||  ì‹ ì„¸í˜¸|ëŒ€ë¦¬|202100009|ì„œë¹„ìŠ¤í˜ì‹ ì„¼í„°|ì œì¡°ë°©ì‚°ë‹´ë‹¹/ì œì¡°ìš´ì˜íŒ€|
   ||   ì •í˜¸í˜„|ì‚¬ì›|201903684|ë°ì´í„°ì„¼í„°|ê¸ˆìœµìš´ì˜íŒ€|

# ì„œë¹„ìŠ¤ ì‹œë‚˜ë¦¬ì˜¤

ê¸°ëŠ¥ì  ìš”êµ¬ì‚¬í•­
1. ì‚¬ìš©ìê°€ ì£¼ë¬¸ì„ í•œë‹¤
2. ì£¼ë¬¸ì´ ì‹œì‘ë˜ë©´ ë°°ì†¡ì´ ì‹œì‘ëœë‹¤
3. ì£¼ë¬¸ì´ ì‹œì‘ë˜ë©´ ì¬ê³ ê°€ ê°ì†Œí•œë‹¤
4. ì£¼ë¬¸ì´ ì·¨ì†Œë˜ë©´ ë°°ì†¡ì´ ì·¨ì†Œëœë‹¤
5. ì£¼ë¬¸ì´ ì·¨ì†Œë˜ë©´ ì¬ê³ ê°€ ì¦ê°€í•œë‹¤


ë¹„ê¸°ëŠ¥ì  ìš”êµ¬ì‚¬í•­
1. ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤ë¥¼ ë„˜ë‚˜ë“œëŠ” ì‹œë‚˜ë¦¬ì˜¤ì— ëŒ€í•œ íŠ¸ëœì­ì…˜ ì²˜ë¦¬
2. ì£¼ë¬¸ì‹œ ì¬ê³ ê°€ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤
3. ê³ ê°ì´ ì£¼ë¬¸ìƒíƒœë¥¼ ì£¼ë¬¸ì‹œìŠ¤í…œì—ì„œ í™•ì¸í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤ (CQRS)


# CI/CD codebuild ë°°í¬

- CodeBuild ë°°í¬ë¥¼ ìœ„í•œ codebuild.yaml ì‘ì„± 
```
version: 0.2

env:
  variables:
   _PROJECT_NAME: "onlineshop"

phases:
  build:
    commands:
      - echo Build Starting on `date`
      - echo install kubectl
      - curl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl"
      
  post_build:
    commands:
      - echo make docker image
      - cd /home/msa-capstone-project/onlineshop
      - cd docker build -t onlineshop/onlineshop:v1
      - echo connect kubectl
      - kubuctl_build.sh
      
 cache:
  paths:
   - '/root/.m2/**/*'
```

- kubuctl_build.sh ì‘ì„± 
```
kubectl apply -f 0.deployment.yaml
kubectl apply -f 1.deployment.yaml
kubectl apply -f 2.deployment.yaml
kubectl apply -f 3.deployment.yaml
kubectl apply -f 4.deployment.yaml
kubectl apply -f 5.deployment.yaml
```

- AWSì—ì„œ CodeBuild í”„ë¡œì íŠ¸ë¥¼ ìƒì„± í•˜ê³  codeBuild í”„ë¡œì íŠ¸ ìƒì„± ë° ì‹œì‘

![coudebuild image](./CICD/codebuild_image1.JPG)

- Build Status
![coudebuild image](./CICD/codebuild_image2.JPG)

- Build Log
![coudebuild image](./CICD/codebuild_image3.JPG)
